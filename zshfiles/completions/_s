#compdef s

_s() {
  local state
  local provider_f="$HOME/bin/s_provider"
  providers=$(grep -e "^# \"" "$provider_f" | sed 's/\"//g' \
    | cut -b3- | awk -F ": " '{ printf("%s\\:\047%s\047 ", $1,$2) ;}')
  _arguments  \
    '-h[Show help message]: :' \
    '-l[Show search providers list]: :' \
    '-g[Force search in GUI browser]' \
    '1: :->alis' \
    && ret=0

  case $state in
    alis)
      _arguments "1:providers:(($providers))"  && ret=0
      ;;
  esac
  return 0
}
