#!/bin/sh
# written by Shotaro Fujimoto (https://github.com/ssh0)

cachefile="$HOME/.cache/streamradio/station"
fifofile="$HOME/.cache/streamradio/fifo"

defaultstation="http://streaming.radionomy.com/J-PopProjectRadio"

if [ $# = 1 ];then
  station="$1"
elif [ "${station}" = "" ]; then
  station="${defaultstation}"
fi

station="$(head -n 1 "${cachefile}")"

if [ "$1" = "pause" ]; then
  echo "pause" >> "${fifofile}"
elif [ "$1" = "quit" ]; then
  echo "quit" >> "${fifofile}"
elif [ "$1" = "start" ]; then
  echo "${station}" > "${cachefile}"
  echo "load ${station}" >> "${fifofile}"
fi
